<!DOCTYPE html>





<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Arıza Takip Sistemi | Erişim Arıza Formu</title>
    <!-- Tell the browser to be responsive to screen width -->
    <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport"> 
    <link href="assets/ats/bower_components/css/form-style.css" rel="stylesheet">
    <link href="assets/ats/dist/css/loading.css" rel="stylesheet">
    <link href="bootstrap/3.3.4/css/bootstrap.min.css" rel="stylesheet">
    <script src="assets/ats/bower_components/jquery/dist/jquery.min.js"></script>
    <!-- Bootstrap 3.3.7 -->
    <script src="assets/ats/bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
    <!--<script src="//www.google.com/recaptcha/api.js?render=6LfryI8UAAAAAPDWEhJK0c9SwGCDl9UQRLkNzPRp"></script>-->
</head>
<body>
<div class="loading" id="loading" style="display: none"></div>
<!------ Include the above in your HEAD tag ---------->
<div class="login-box">    

    <div id="signupbox" class="login-box-body">
        <div class="panel panel-info" style="margin: 20px">
            <div class="panel-heading">
                <div class="panel-title" style="text-align: center; padding: 10px"><b>ERİŞİM ARIZA FORMU</b></div>
            </div>  
            <div class="panel-body" style="padding-right: 50px; padding-top: 25px">
                <form id="accessFault" class="form-horizontal" action="/accessform" method="POST">
                    <input id="id" name="id" type="hidden" value="">

                    <div class="form-group required">
                        <label for="nameSurname" class="control-label col-md-3  requiredField">AD SOYAD<span class="asteriskField" style="color: red">*</span> </label>
                        <div class="controls col-md-8 ">
                            <input id="nameSurname" name="nameSurname" name="username" style="margin-bottom: 10px" placeholder="Adınızı ve soyadınızı giriniz." type="text" class="input-md  textinput textInput form-control" required="true" value="" maxlength="30">
                        </div>
                    </div>
                    <div class="form-group required">
                        <label for="phone" class="control-label col-md-3  requiredField">CEP TEL. NO.<span class="asteriskField" style="color: red">*</span> </label>
                        <div class="controls col-md-8 ">
                            <input id="phone" name="phone" onkeyup="validate(this.value)" onkeypress="if(this.value.length==11) return false;" style="margin-bottom: 10px" placeholder="Telefon numaranızı 05XXXXXXXXX bi&ccedil;iminde giriniz." type="number" class="input-md  textinput textInput form-control" required="true" value="">
                            <div type="text" id="phoneErrorDiv" style="color: red; font-weight: bold;"></div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="phone2" class="control-label col-md-3  requiredField">DİĞER CEP TEL. NO.</label>
                        <div class="controls col-md-8 ">
                            <input id="phone2" name="phone2" onkeyup="validate2(this.value)" onkeypress="if(this.value.length==11) return false;" style="margin-bottom: 10px" placeholder="Telefon numaranızı 05XXXXXXXXX bi&ccedil;iminde giriniz." type="number" class="input-md  textinput textInput form-control" value="">
                            <div type="text" id="phoneErrorDiv2" style="color: red; font-weight: bold;"></div>
                        </div>
                    </div>
                    <div class="form-group required">
                        <label for="email" class="control-label col-md-3  requiredField">E-POSTA<span class="asteriskField" style="color: red">*</span> </label>
                        <div class="controls col-md-8 ">    
                            <input id="email" name="email" style="margin-bottom: 10px" placeholder="E-posta giriniz." type="email" class="input-md  textinput textInput form-control" required="true" value="">
                        </div>
                    </div>
                    <div class="form-group required">
                        <label for="schoolCode" class="control-label col-md-3  requiredField">KURUM KODU<span class="asteriskField" style="color: red">*</span> </label>
                        <div class="controls col-md-8 "> 
                            <input id="schoolCode" name="schoolCode" onkeyup="getschool(this.value)" style="margin-bottom: 10px" placeholder="Kurum kodunu giriniz." type="number" class="input-md  textinput textInput form-control" required="true" value="">
                            <div type="text" id="codeErrorDiv" style="color: red; font-weight: bold">
                            </div>
                        </div>
                    </div>
                    <div id="facilityServiceDiv" style="display: none">
                        <div id="facilityNoDiv" class="form-group">
                            <label for="facilityNo" class="control-label col-md-3  requiredField">TESİS NO.</label>
                            <div class="controls col-md-8 ">
                                <input type="text" style="margin-bottom: 10px" id="facilityNo" class="input-md  textinput textInput form-control" onkeyup="getfacility(this.value)" maxlength="9" placeholder=" Tesis numarasını XX.XX.XXX biçiminde giriniz.">   
                                <div type="text" id="facilityErrorDiv" style="color: red; font-weight: bold;"></div>
                            </div>
                        </div>
                        <div id="serviceNoDiv" class="form-group">
                            <label for="serviceNo" class="control-label col-md-3  requiredField">HİZMET NO.</label>
                            <div class="controls col-md-8 "> 
                                <div style="display:flex">
                                    <input type="text" readonly="" style="width: 22%; text-align:right; padding: 1px; margin-bottom: 10px" id="serviceNoStatic" value="140000000" class="input-md  textinput textInput form-control">                                                    
                                    <input type="number" style="width: 80%; text-align:left; padding: 0px" id="serviceNo" class="input-md  textinput textInput form-control" maxlength="6" placeholder=" Hizmet numaranızın son 6 hanesini giriniz." onkeyup="getservice(this.value)">                                                    
                                </div>
                                <div type="text" id="serviceErrorDiv" style="color: red; font-weight: bold;"></div>
                            </div>
                        </div>
                    </div>
                    <div class="panel panel-info" style="background-color: #e9ecef">
                        <div class="panel-heading">
                            <div style="text-align: center"><b>OKUL BİLGİLERİ</b></div>
                        </div>  
                        <div class="panel-body">
                            <div id="schoolInfo" class="form-group required">
                                <input id="schoolId" type="hidden">
                                <label for="info" class="control-label col-md-3"><b>Okul Adı:</b></label>
                                <div class="controls col-md-8">
                                    <input id="schoolUpdateable" type="text" class="input-md  textinput textInput form-control" style="font-weight: bold; background-color: #e6e9e9" readonly/="">
                                </div>
                            </div>            
                            <div type="text" id="addressErrorDiv" class="form-group" style="margin-bottom: 0px; margin-top: 5px; display: none">
                                <label for="addressErrorDiv" class="control-label col-md-3"><span class="asteriskField" style="color: red"></span> </label>
                                <div class="controls col-md-8 "> 
                                    <div type="text" style="color: red; font-weight: bold;">
                                        <img src="assets/ats/dist/img/error.gif" alt="" style="height: 20px">
                                        Okul adresini giriniz.
                                    </div>
                                </div>
                            </div>
                            <div class="form-group required">
                                <label for="addressUpdateable" class="control-label col-md-3">Adres: </label>
                                <div class="controls col-md-8 "> 
                                    <input id="addressUpdateable" type="text" class="input-md  textinput textInput form-control" style="background-color: #e6e9e9" readonly/="">
                                </div>
                            </div>   
                            <div type="number" id="phoneUpdateErrorDiv" class="form-group" style="margin-bottom: 0px; margin-top: 5px; display: none">
                                <label for="phoneUpdateErrorDiv" class="control-label col-md-3"><span class="asteriskField" style="color: red"></span> </label>
                                <div class="controls col-md-8 "> 
                                    <div type="text" style="color: red; font-weight: bold;">
                                        <img src="assets/ats/dist/img/error.gif" alt="" style="height: 20px">
                                        Okul telefon numarasını 0XXXXXXXXXX biçiminde giriniz.
                                    </div>
                                </div>
                            </div>
                            <div class="form-group required">
                                <label for="phoneUpdateable" class="control-label col-md-3">Telefon: </label>
                                <div class="controls col-md-8 "> 
                                    <input id="phoneUpdateable" type="number" class="input-md  textinput textInput form-control" onkeypress="if (this.value.length === 11)
                                                return false;" onkeyup="validateUpdatePhone(this.value)" style="background-color: #e6e9e9" readonly/="">
                                </div>
                            </div>    
                            <div id="emailUpdateErrorDiv" class="form-group" style="margin-bottom: 0px; margin-top: 5px; display: none">
                                <label for="emailUpdateErrorDiv" class="control-label col-md-3"><span class="asteriskField" style="color: red"></span> </label>
                                <div class="controls col-md-8 "> 
                                    <div type="text" style="color: red; font-weight: bold;">
                                        <img src="assets/ats/dist/img/error.gif" alt="" style="height: 20px">
                                        Lütfen meb.k12.tr uzantılı e-posta adresinizi giriniz.
                                    </div>
                                </div>
                            </div>
                            <div class="form-group required">
                                <label for="emailUpdateable" class="control-label col-md-3">E-Posta: </label>
                                <div class="controls col-md-8 "> 
                                    <input id="emailUpdateable" type="email" class="input-md  textinput textInput form-control" style="background-color: #e6e9e9" readonly/="">
                                </div>
                            </div> 
                            <div class="form-group required">
                                <label for="schoolCodeUpdateable" class="control-label col-md-3">Kurum Kodu: </label>
                                <div class="controls col-md-8 "> 
                                    <input id="schoolCodeUpdateable" type="number" class="input-md  textinput textInput form-control" style="background-color: #e6e9e9" readonly/="">
                                </div>
                            </div> 
                            <div class="form-group">
                                <label for="facilityCodeUpdateable" class="control-label col-md-3">Tesis Kodu: </label>
                                <div class="controls col-md-8 "> 
                                    <input id="facilityCodeUpdateable" type="text" class="input-md  textinput textInput form-control" style="background-color: #e6e9e9" readonly/="">
                                </div>
                            </div> 
                            <div class="form-group required">
                                <label for="phaseUpdateable" class="control-label col-md-3 ">Faz: </label>
                                <div class="controls col-md-8 "> 
                                    <input id="phaseUpdateable" type="text" class="input-md  textinput textInput form-control" style="background-color: #e6e9e9" readonly/="">
                                </div> 
                            </div> 
                            <div class="form-group required">
                                <label for="lotUpdateable" class="control-label col-md-3 ">Lot: </label>
                                <div class="controls col-md-8 "> 
                                    <input id="lotUpdateable" type="text" class="input-md  textinput textInput form-control" style="background-color: #e6e9e9" readonly/="">
                                </div> 
                            </div> 
                            <div class="form-group required">
                                <span class="control-label col-md-3">
                                </span>
                                <div class="controls col-md-8" style="text-align: center"> 
                                    <font color="red">Okulunuza hızlı ve doğru servis hizmeti sunulabilmesi için lütfen okulunuza ilişkin hatalı gördüğünüz kısımları güncelleyerek arıza oluşturma işlemine devam edin.</font>
                                    <br>
                                    <button id="updateSchoolBtn" type="button" class="btn btn-warning" onclick="loading(); findSameAccessUpdateSchool()"> Okul Bilgilerini Güncelle </button>
                                    <button type="button" id="saveSchoolBtn" class="btn btn-success" style="display: none; padding: 6px 12px" onclick="return validateUpdateEmailAndPhone()">Kaydet</button>
                                    &nbsp;
                                    <button id="cancelSchoolBtn" type="button" class="btn btn-danger" style="display: none; padding: 6px 18px 6px" onclick="loading(); cancelSchool()"> İptal </button>
                                </div>
                            </div>
                        </div>
                    </div> 
                    <div class="form-group required">
                        <label for="faultDesc" class="control-label col-md-3  requiredField">ARIZA TANIMI<span class="asteriskField" style="color: red">*</span> </label>
                        <div class="controls col-md-8 ">    
                            <select id="fault" name="faultDesc" style="margin-bottom: 10px" class="input-md  textinput textInput form-control" required="required">
                                <option value="">Arıza tanımı seçiniz.</option>
                                <option value="1">Okulda internet yok.</option>
                            </select>
                            <div class="has-error">
                                
                            </div>
                        </div>
                    </div>
                    <div class="form-group required">
                        <label for="faultNote" class="control-label col-md-3  requiredField">ARIZA NOTU<span class="asteriskField" style="color: red">*</span> </label>
                        <div class="controls col-md-8 "> 
                            <textarea id="faultNote" name="faultNote" style="margin-bottom: 10px; height: 100px" placeholder="Arıza notu giriniz." class="input-md  textinput textInput form-control" required="required"></textarea>
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="box-footer" style="text-align: right">
                            <div class="form-actions">
                                <a href="main.html" class="btn btn-default btn-sm" style="padding: 10px 40px ; font-size: 13px; background-color: #f5f5f5 ">İPTAL</a>
                                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                <input type="submit" id="submitBtn" style="padding: 10px 40px; font-size: 13px" value="GÖNDER" class="btn btn-primary btn-default" onclick="loading()">
                            </div>
                        </div>
                    </div>

                    <input type='hidden' id='csrfToken' name="" value=''>
                <div>
</div></form>
            </div>
        </div>
    </div>
</div>
<div class="modal fade in" id="updateInfoError">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="panel-title" style="background-color:#f0ad4e">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" style="padding: 10px"><center>.:: UYARI ::.</center></h4>
            </div>
            <div class="modal-body">
                <center>Lütfen <b>AD SOYAD</b>, <b>CEP TEL. NO.</b> ve <b>E-POSTA</b> alanlarını doldurunuz.</center>
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>
<div class="modal fade in" id="updateSchoolError">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="panel-title" style="background-color:#f0ad4e">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" style="padding: 10px"><center>.:: UYARI ::.</center></h4>
            </div>
            <div class="modal-body">
                <p><center><b> Herhangi bir okul seçilmedi!</b></center>
                <br><center>Okul bilgilerini günceleyebilmeniz için zorunlu alanların doldurulması gerekmektedir.</center>
            </p></div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>
<div class="modal fade in" id="emailError">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="panel-title" style="background-color:red">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" style="padding: 10px"><center>.:: HATA ::.</center></h4>
            </div>
            <div class="modal-body">
                <p><center><b> E- posta adresinizi "meb.k12.tr" uzantılı olarak girmediniz.</b></center>
                <br><center>Lütfen gerekli tüm alanları uygun biçimde doldurup tekrar arıza kaydı açınız.</center>
            </p></div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>
<div class="modal fade in" id="phoneError">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="panel-title" style="background-color:red">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" style="padding: 10px"><center>.:: HATA ::.</center></h4>
            </div>
            <div class="modal-body">
                <p><center><b> Cep telefon numaranızı 0XXXXXXXXXX biçiminde girmediniz.</b></center>
                <br><center>Lütfen gerekli tüm alanları uygun biçimde doldurup tekrar arıza kaydı açınız.</center>
            </p></div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>
<div class="modal modal-success fade in" id="updateSchoolSuccess">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="panel-title" style="background-color:#00a65a">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" style="padding: 10px"><center>.:: GÜNCELLEME İSTEĞİ BAŞARILI ::.</center></h4>
            </div>
            <div class="modal-body">
                <p><center><b> Okul bilgileri güncelleme talebiniz ilgili birime iletilmiştir.</b></center>
                <br><center>Uygun bulunması durumunda okul bilgileriniz güncellenecektir.</center>
            </p></div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>
<div class="modal fade in" id="formError">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="panel-title" style="background-color:red">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" style="padding: 10px"><center>.:: HATA ::.</center></h4>
            </div>
            <div class="modal-body">
                <p><center><b> Arıza kaydı açılamadı!</b></center>
                <br><center>Lütfen gerekli tüm alanları uygun biçimde doldurup tekrar arıza kaydı açınız.</center>
            </p></div>
        </div>
    </div>
</div>
<div class="modal fade in" id="wifimodal">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="panel-title" style="background-color:#d9edf7">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" style="padding: 10px"><center>.:: BİLGİLENDİRME ::.</center></h4>
            </div>
            <div class="modal-body">
                <p>Wi-Fi hizmeti sadece tabletler için sağlanmakta olup harici cihazla lütfen bağlanmayınız.</p>
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>

<div class="modal fade in" id="duplicateRequest" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="panel-title" style="background-color:orange">
                <h4 class="modal-title" style="padding: 10px"><center>.:: UYARI ::.</center></h4>
            </div>
            <div class="modal-body">
                <p>Sayın İlgili,
                    <br><br>Kurumunuz için <b id="repeatedNameSurname"></b> tarafından "<b id="repeatedFaultDesc"></b>" başlığı ile açılmış bir arıza kaydı bulunmaktadır.
                    <br><br>Devam ederek yeni arıza kaydı oluşturmak istiyor musunuz?
                </p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-success pull-left" data-dismiss="modal">DEVAM ET</button>
                <a href="index.htm" class="btn btn-danger custom-width" onclick="loading()">İPTAL</a>
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>
<div class="modal fade in" id="duplicateRequestError">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="panel-title" style="background-color:#FB6648">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" style="padding: 10px"><center>.:: HATA ::.</center></h4>
            </div>
            <div class="modal-body">
                <p><center> Kurum kodunuzu kontrol ediniz.</center>
                <br>Kurum kodunuzun doğru olduğunu düşünüyorsanız ve hata almaya devam ediyorsanız lütfen <b>erisim@eba.gov.tr</b> adresine aşağıdaki hata kodu ile birlikte e-posta gönderiniz.
                <br><b>Hata Kodu: 2622</b>
                </p>
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>
<script>
    if (window.history.replaceState) {
        window.history.replaceState(null, null, window.location.href);
    }
</script>
<script type="text/javascript">
    $(document).ready(function () {
        if (true) {
            if () {
                $("#formError").modal("show");
            }
        }
    });
</script>
<script type="text/javascript">
    $(window).bind("pageshow", function () {
        $('#nameSurname').val("");
        $('#phone').val("");
        $('#phone2').val("");
        $('#email').val("");
        $('#schoolCode').val("");
        $('#facilityNo').val("");
        $('#serviceNo').val("");
        $('#fault').val("");
        $('#faultNote').val("");
    });
</script>
<script type="text/javascript">
    function loading() {
        if (document.getElementById("nameSurname").value.trim() !== ""
                && document.getElementById("phone").value.trim() !== ""
                && document.getElementById("fault").value.trim() !== ""
                && document.getElementById("schoolCode").value.trim() !== ""
                && document.getElementById("email").value.trim() !== ""
                && validateEmail === true) {
            document.getElementById("loading").style.display = "block";


        }
    }
</script>

<script type="text/javascript">
    $(document).on('change', '#fault', function () {
        if ($(this).val() === '5') {
            $('#submitBtn').attr("disabled", true);
            $('#wifimodal').modal('show');
        } else {

            if ($(this).val() && $('#schoolCode').val()) {
                var code = $('#schoolCode').val();
                var faultDesc = $('#fault').val();

                $.getJSON('/findSameFault', {code: code, faultDesc: faultDesc}, function (data) {
                    if (data.result !== "notRepeated") {
                        if (data.result === "error" || data.result === "") {
                            $('#duplicateRequestError').modal('show');
                        } else {
                            $('#repeatedNameSurname').text(data.result);
                            $('#repeatedFaultDesc').text($('select option:selected').text());
                            $('#duplicateRequest').modal('show');
                            $('#submitBtn').attr("disabled", false);
                        }
                    } else {
                        $('#submitBtn').attr("disabled", false);
                    }
                });
            }

        }


    });
</script>

<script type="text/javascript">
    function getschool(code) {
        if (code.length === 6) {
            var code = $('#schoolCode').val();
            if (/^(\d{6})$/.test(code) === false) {
                $('#codeErrorDiv').show();
                $("#facilityServiceDiv").hide();
                $('#codeErrorDiv').text('Lütfen geçerli bir kurum kodu giriniz.'); 
                $('#submitBtn').attr("disabled", true);
            } else {
                $('#codeErrorDiv').hide(); 
                $('#facilityErrorDiv').hide(); 
                $('#facilityServiceDiv').hide(); 
                $('#facilityNoDiv').hide(); 
                $('#serviceNoDiv').hide(); 
                $('#serviceErrorDiv').hide(); 
                $.getJSON('/schoolgetcode', {code: code}, function (data) {
                    if ((data.code) === "-1") {
                        $("#facilityServiceDiv").show();
                        $("#facilityNoDiv").show();
                        $("#serviceNoDiv").show();
                        $('#codeErrorDiv').show();
                        $('#codeErrorDiv').text('Kurum kodu bulunamadı. Aşağıdaki bilgileri girerek devam ediniz.'); 
                        $('#submitBtn').attr("disabled", true);
                    } else if ($('#fault').val() !== 5) {
                        $('#submitBtn').attr("disabled", true);
                    } else {
                        $('#submitBtn').attr("disabled", false);
                    }
                });
                if ($('#fault').val() === '5') {
                    $('#submitBtn').attr("disabled", true);
                    $('#wifimodal').modal('show');
                } else {
                    $('#submitBtn').attr("disabled", false);
                }
            }
        }
    }
</script>
<script type="text/javascript">
    function getfacility(facilityCode) {
        if (facilityCode.length === 9) {
            var code = $('#facilityNo').val() + '.00.00.00';
            $('#codeErrorDiv').hide(); 
            $('#facilityErrorDiv').hide(); 
            $('#serviceErrorDiv').hide(); 
            $.getJSON('/facilitygetcode', {code: code}, function (data) {
                if (((data.code) !== "-1")) {
                    $('#schoolCode').val(data.code);
                    $('#submitBtn').attr("disabled", false);
                    $('#serviceNoDiv').hide();
                } else {
                    $("#facilityServiceDiv").show();
                    $("#facilityNoDiv").show();
                    $("#serviceNoDiv").show();
                    $('#facilityErrorDiv').show();
                    $('#facilityErrorDiv').text('Tesis numarasını XX.XX.XXX biçiminde giriniz.'); 
                    $('#submitBtn').attr("disabled", true);
                }
            });
        }
    }
</script>
<script type="text/javascript">
    function getservice(num) {

        if (num.length === 6) {
            var code = $('#serviceNo').val();
            $('#codeErrorDiv').hide(); 
            $('#facilityErrorDiv').hide(); 
            $('#serviceErrorDiv').hide(); 
            $.getJSON('/servicegetcode', {code: code}, function (data) {
                if (((data.code) !== "-1")) {
                    $('#schoolCode').val(data.code);
                    $('#submitBtn').attr("disabled", false);
                    $('#facilityNoDiv').hide();
                } else {
                    $("#facilityServiceDiv").show();
                    $("#facilityNoDiv").show();
                    $("#serviceNoDiv").show();
                    $('#serviceErrorDiv').show();
                    $('#serviceErrorDiv').text('Hizmet numaranızın son 6 hanesini giriniz.'); 
                    $('#submitBtn').attr("disabled", true);
                }
            });
        }
    }
</script>

<script type="text/javascript">
    function validate(phone) {
        if (phone.length === 11) {
            if (phone.charAt(0) !== "0" || phone.charAt(1) !== "5")
            {
                $('#phoneErrorDiv').show();
                $('#phoneErrorDiv').text('Cep telefonu numaranızı 05XXXXXXXXX biçiminde giriniz.'); 
                $('#submitBtn').attr("disabled", true);
            } else {
                $('#phoneErrorDiv').hide();
                $('#submitBtn').attr("disabled", false);
            }
        }
    }
</script>

<script type="text/javascript">
    function validate2(phone) {
        if (phone.length === 11) {
            if (phone.charAt(0) !== "0" || phone.charAt(1) !== "5")
            {
                $('#phoneErrorDiv2').show();
                $('#phoneErrorDiv2').text('Cep telefonu numaranızı 05XXXXXXXXX biçiminde giriniz.'); 
            } else {
                $('#phoneErrorDiv2').hide();
            }
        }
    }
</script>
<script type="text/javascript">
    function validateEmail() {
        var regex = /^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/;
        var email = $('#email').val();
        if (regex.test(email)) {
            return true;
        } else {
            return false;
        }
    }
</script>
<script type="text/javascript">
    $("#schoolCode").on("change", function () {
        var schoolCode = $("#schoolCode").val();

        if (schoolCode) {
            $.ajax({
                type: 'GET',
                url: '/schoolInfoAccess',
                contentType: 'application/json; charset=utf-8',
                data: {schoolCode},
                success: function (data) {
                    $("#schoolId").val(data.id);
                    $("#schoolUpdateable").val(data.lokasyonAdi);
                    $("#cityUpdateable").val(data.sehir);
                    $("#addressUpdateable").val(data.adres);
                    $("#phoneUpdateable").val(data.telefon);
                    $("#emailUpdateable").val(data.eposta);
                    $("#schoolCodeUpdateable").val(data.kurumKodu);
                    $("#facilityCodeUpdateable").val(data.tesisKodu);
                    $("#phaseUpdateable").val(data.faz);
                    $("#lotUpdateable").val(data.lot);
                },
                error: function () {

                }
            });
        } else {

        }
    });
</script>
<script type="text/javascript">
    function updateSchool() {
        if ($('#nameSurname').val() === "" && $('#phone').val() === "" && $('#email').val() === "") {
            $('#updateInfoError').modal('show');
            document.getElementById("loading").style.display = "none";
        } else if ($('#schoolUpdateable').val()) {
            $('#updateSchoolBtn').hide();
            $('#saveSchoolBtn').show();
            $('#cancelSchoolBtn').show();

            $('#schoolUpdateable').attr('readonly', false);
            $('#schoolUpdateable').css('background-color', '#fff');

            $('#cityUpdateable').attr('readonly', false);
            $('#cityUpdateable').css('background-color', '#fff');

            $('#boroughUpdateable').attr('readonly', false);
            $('#boroughUpdateable').css('background-color', '#fff');

            $('#addressUpdateable').attr('readonly', false);
            $('#addressUpdateable').css('background-color', '#fff');

            $('#phoneUpdateable').attr('readonly', false);
            $('#phoneUpdateable').css('background-color', '#fff');

            $('#emailUpdateable').attr('readonly', false);
            $('#emailUpdateable').css('background-color', '#fff');

            $('#schoolCodeUpdateable').attr('readonly', false);
            $('#schoolCodeUpdateable').css('background-color', '#fff');

            $('#phaseUpdateable').attr('readonly', false);
            $('#phaseUpdateable').css('background-color', '#fff');

            $('#lotUpdateable').attr('readonly', false);
            $('#lotUpdateable').css('background-color', '#fff');

            document.getElementById("loading").style.display = "none";
        } else {
            $('#updateSchoolError').modal('show');
            document.getElementById("loading").style.display = "none";
        }
    }
</script>
<script type="text/javascript">
    function cancelSchool() {
        if ($("#school option:selected").text() !== 'Okul seçiniz.') {

            var citySelected = $("#city option:selected").text();
            var boroughSelected = $("#borough option:selected").text();
            var typeSelected = $("#schoolType option:selected").text();
            var schoolSelected = $("#school option:selected").text();
            $("#schoolText").val(schoolSelected);
            $("#schoolUpdateable").val($("#school option:selected").text());
            $.ajax({
                type: 'GET',
                url: '/schoolInfo',
                contentType: 'application/json; charset=utf-8',
                data: {cityName: citySelected, boroughName: boroughSelected, schoolType: typeSelected, schoolId: schoolSelected},
                success: function (data) {
                    $("#schoolId").val(data.id);
                    $("#cityUpdateable").val(data.ilAdi);
                    $("#boroughUpdateable").val(data.ilceAdi);
                    $("#addressUpdateable").val(data.adres);
                    $("#phoneUpdateable").val(data.telefon);
                    $("#emailUpdateable").val(data.email);
                    $("#schoolCodeUpdateable").val(data.kurumKodu);
                    $("#facilityCodeUpdateable").val(data.tesisKodu);
                    $("#phaseUpdateable").val(data.faz);
                    $("#lotUpdateable").val(data.kisim);
                    document.getElementById("loading").style.display = "none";
                },
                error: function () {
                    document.getElementById("loading").style.display = "none";
                }
            });


            $('#updateSchoolBtn').show();
            $('#saveSchoolBtn').hide();
            $('#addressErrorDiv').hide();
            $('#phoneUpdateErrorDiv').hide();
            $('#emailUpdateErrorDiv').hide();
            $('#cancelSchoolBtn').hide();

            $('#schoolUpdateable').attr('readonly', true);
            $('#schoolUpdateable').css('background-color', '#e6e9e9');


            $('#cityUpdateable').attr('readonly', true);
            $('#cityUpdateable').css('background-color', '#e6e9e9');


            $('#boroughUpdateable').attr('readonly', true);
            $('#boroughUpdateable').css('background-color', '#e6e9e9');


            $('#addressUpdateable').attr('readonly', true);
            $('#addressUpdateable').css('background-color', '#e6e9e9');


            $('#phoneUpdateable').attr('readonly', true);
            $('#phoneUpdateable').css('background-color', '#e6e9e9');


            $('#emailUpdateable').attr('readonly', true);
            $('#emailUpdateable').css('background-color', '#e6e9e9');


            $('#schoolCodeUpdateable').attr('readonly', true);
            $('#schoolCodeUpdateable').css('background-color', '#e6e9e9');


            $('#facilityCodeUpdateable').attr('readonly', true);
            $('#facilityCodeUpdateable').css('background-color', '#e6e9e9');
            $('#facilityCodeUpdateable').attr('type', 'text');

            $('#phaseUpdateable').attr('readonly', true);
            $('#phaseUpdateable').css('background-color', '#e6e9e9');
            $('#phaseUpdateable').attr('type', 'text');

            $('#lotUpdateable').attr('readonly', true);
            $('#lotUpdateable').css('background-color', '#e6e9e9');
            $('#lotUpdateable').attr('type', 'text');

            document.getElementById("loading").style.display = "none";
        } else {
            $('#updateSchoolError').modal('show');
            document.getElementById("loading").style.display = "none";
        }
    }
</script>
<script type="text/javascript">
    function saveSchool() {
        if ($('#schoolUpdateable').val()) {
            var schoolId = $("#schoolId").val();
            var schoolName = $('#schoolUpdateable').val();
            var schoolAddress = $('#addressUpdateable').val();
            var schoolPhone = $('#phoneUpdateable').val();
            var schoolEmail = $('#emailUpdateable').val();
            var schoolCode = $('#schoolCodeUpdateable').val();
            var facilityCode = $('#facilityCodeUpdateable').val();
            var phase = $('#phaseUpdateable').val();
            var lot = $('#lotUpdateable').val();
            var adderName = $('#nameSurname').val();
            var adderPhone = $('#phone').val();
            var adderEmail = $('#email').val();

            $.ajax({
                type: 'GET',
                url: '/updateschoolbyuseraccess',
                contentType: 'application/json; charset=utf-8',
                data: {
                    schoolId: schoolId,
                    schoolName: schoolName,
                    schoolAddress: schoolAddress,
                    schoolPhone: schoolPhone,
                    schoolEmail: schoolEmail,
                    schoolCode: schoolCode,
                    facilityCode: facilityCode,
                    phase: phase,
                    lot: lot,
                    adderName: adderName,
                    adderPhone: adderPhone,
                    adderEmail: adderEmail
                },
                success: function (data) {
                    if (data.result === "success") {

                        $('#updateSchoolSuccess').modal('show');
                        $('#updateSchoolBtn').show();
                        $('#saveSchoolBtn').hide();
                        $('#cancelSchoolBtn').hide();

                        $('#schoolUpdateable').attr('readonly', true);
                        $('#schoolUpdateable').css('background-color', '#e6e9e9');

                        $('#cityUpdateable').attr('readonly', true);
                        $('#cityUpdateable').css('background-color', '#e6e9e9');

                        $('#boroughUpdateable').attr('readonly', true);
                        $('#boroughUpdateable').css('background-color', '#e6e9e9');

                        $('#addressUpdateable').attr('readonly', true);
                        $('#addressUpdateable').css('background-color', '#e6e9e9');

                        $('#phoneUpdateable').attr('readonly', true);
                        $('#phoneUpdateable').css('background-color', '#e6e9e9');

                        $('#emailUpdateable').attr('readonly', true);
                        $('#emailUpdateable').css('background-color', '#e6e9e9');

                        $('#schoolCodeUpdateable').attr('readonly', true);
                        $('#schoolCodeUpdateable').css('background-color', '#e6e9e9');

                        $('#phaseUpdateable').attr('readonly', true);
                        $('#phaseUpdateable').css('background-color', '#e6e9e9');

                        $('#lotUpdateable').attr('readonly', true);
                        $('#lotUpdateable').css('background-color', '#e6e9e9');

                        $('#updateSchoolBtn').html('Güncelleme İsteği Gönderildi');
                        $('#updateSchoolBtn').attr("disabled", true);
                        $('#updateSchoolBtn').removeClass("btn btn-warning").addClass("btn btn-success");
                        document.getElementById("loading").style.display = "none";
                    } else {
                        $('#updateSchoolError').find('.modal-body').text('Lütfen tüm alanları doldurunuz. ');
                        $('#updateSchoolError').modal('show');
                        document.getElementById("loading").style.display = "none";
                    }
                },
                error: function (data) {
                    $('#updateSchoolError').find('.modal-body').text('"Tesis Kodu" bulunamadığı için okul bilgileri güncellenemedi.');
                    $('#updateSchoolError').modal('show');
                    document.getElementById("loading").style.display = "none";
                }
            });
        } else {
            $('#updateSchoolError').find('.modal-body').text('Okul adı hatalı.');
            $('#updateSchoolError').modal('show');
            document.getElementById("loading").style.display = "none";
        }
    }
</script>
<script type="text/javascript">
    function findSameAccessUpdateSchool() {
        if ($('#nameSurname').val() === "" && $('#phone').val() === "" && $('#email').val() === "") {
            $('#updateInfoError').modal('show');
            document.getElementById("loading").style.display = "none";

        } else if ($('#schoolUpdateable').val()) {
            var schoolId = $('#schoolId').val();
            $.getJSON('/findSameInfrastructureUpdateSchool', {schoolId: schoolId}, function (data) {
                if (data.result !== "notRepeated") {
                    if (data.result === "error" || data.result === "") {
                    } else {
                        $('#repeatedUpdateSchoolNameSurname').text(data.result);
                        $('#duplicateUpdateSchoolRequest').modal('show');
                    }
                } else {
                    updateSchool();
                }
            });
        }
    }
</script> 

<script type="text/javascript">
    function validateUpdateEmailAndPhone() {
        var address = $('#addressUpdateable').val();
        var email = $('#emailUpdateable').val();
        var phone = $('#phoneUpdateable').val();
        if (address) {
            if (phone.length === 11 || phone.length === 0) {
                if (phone.charAt(0) === "0") {
                    if (/@meb.k12.tr\s*$/.test(email)) {
                        $('#emailUpdateErrorDiv').hide();
                        $('#addressErrorDiv').hide();
                        $('#phoneUpdateErrorDiv').hide();
                        $('#phoneErrorDiv').hide();
                        $('#emailErrorDiv').hide();
                        loading();
                        saveSchool();
                        return true;
                    } else {
                        $('#emailUpdateErrorDiv').show();
                        $('#addressErrorDiv').hide();
                        $('#phoneUpdateErrorDiv').hide();
                        $('#phoneErrorDiv').hide();
                        $('#emailErrorDiv').hide();
                        return false;
                    }
                } else {
                    $('#phoneUpdateErrorDiv').show();
                    $('#addressErrorDiv').hide();
                    $('#emailUpdateErrorDiv').hide();
                    $('#phoneErrorDiv').hide();
                    $('#emailErrorDiv').hide();
                    return false;
                }
            } else {
                $('#phoneUpdateErrorDiv').show();
                $('#addressErrorDiv').hide();
                $('#emailUpdateErrorDiv').hide();
                $('#phoneErrorDiv').hide();
                $('#emailErrorDiv').hide();
                return false;
            }
        } else {
            $('#addressErrorDiv').show(); 
        }
    }
</script>
<script type="text/javascript">
    function validate(phone) {
        if (phone.length === 11) {
            if (phone.charAt(0) !== "0" || phone.charAt(1) !== "5")
            {
                $('#phoneErrorDiv').show();
                $('#submitBtn').attr("disabled", true);
            } else {
                $('#phoneErrorDiv').hide();
                $('#submitBtn').attr("disabled", false);
            }
        } else {
            $('#phoneErrorDiv').show();
            $('#submitBtn').attr("disabled", true);
        }
    }
</script>
<script type="text/javascript">
    function validateUpdatePhone(phone) {
        if (phone.length === 11) {
            if (phone.charAt(0) !== "0")
            {
                $('#phoneUpdateErrorDiv').show();
            } else {
                $('#phoneUpdateErrorDiv').hide();
            }
        }
    }
</script>

<script>
    $(document).ready(function () {
        $("#nameSurname").keyup(function () {
            var regex = /^[a-zA-Z\sğĞüÜşŞıİÖöÇç\b\0]*$/;
            if ((regex.test($("#nameSurname").val()))) {

            } else {
                $("#nameSurname").val("");
            }
        });
    });
</script>
</body>
</html>